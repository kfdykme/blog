---
title: 单例模式
date: 2020-04-09 12:35:47
tags:
- 设计模式
---

# 单例模式

## Java中的单例

饿汉
``` Java
public class Single {
  private static Signle instance = new Single();

  private Single() {}

  public static Single getInstance() {
    return instance;
  }
}
```
懒汉
``` Java
private static Single instance= null;
private Single() {}

public static Single getInstance () {
  if (instance == null) {
    instance = new Single()
  }

  return instance
}

```
懒汉线程安全
``` Java
public static synchronized Single getInstance() {
  if (instance == null) {
    instance = new Single()
  }

  return instance
}
```
双检验

``` Java
public static Single getInstance() {
  if (instance == null) {
    synchronized(Single.class) {
      if (instance == null) {
        instance == new Single()
      }
    }
  }
  return instance
}
```

登记静态

``` Java
private static class SingleHolder {
  private static final Single INSTANCE = new Signle()
}

private Single() {

}

public static final Single getInstance() {
  return SingleHolder.INSTANCE
}
```

枚举
``` Java

public enum Single {
  INSTANCE;
  public void method() {
    
  }
}
```
## JavaScript中的单例

### 闭包实现单例

``` JavaScript

function A () {
  this.data = "Class A"
}

A.getInstance = function () {
  var instance;
  return function () {
    instance = instance ? instance: new A
    return instance
  }
}()
```

### 正常单例

``` JavaScript
let A = function () {
  if (A.instance) {
    console.log("no new")
  }
  this.data = "Class A"
}

A.getInstance = function () {
  if (A.instance == null) {
    A.instance = new A()
  }
  return A.instance
}

```
